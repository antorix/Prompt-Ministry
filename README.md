*Документация по программе Rocket Ministry. Последнее обновление: 09.10.2022*

* [Возможности](https://github.com/antorix/Rocket-Ministry/blob/master/README.md#возможности)
* [Установка и настройки](https://github.com/antorix/Rocket-Ministry/blob/master/README.md#установка-и-настройки)
* [Некоторые понятия программы](https://github.com/antorix/Rocket-Ministry/blob/master/README.md#некоторые-понятия-программы)
* [Синхронизация данных](https://github.com/antorix/Rocket-Ministry/blob/master/README.md#синхронизация-данных)
* [Часто задаваемые вопросы](https://github.com/antorix/Rocket-Ministry/blob/master/README.md#часто-задаваемые-вопросы)
* [Обратная связь](https://github.com/antorix/Rocket-Ministry/blob/master/README.md#обратная-связь)
* [Лицензия](https://github.com/antorix/Rocket-Ministry/blob/master/README.md#лицензия)

![](https://lh3.googleusercontent.com/j0pQY5rYHN9CAeLaAxK0-pI2T3nAnVxtnScilfBqEQuJGRzt5IsON_eOBawu_PX4Cq9m5WRNEsb2u7l2fhaPcvW4o196MrHiXbJweBL9MeJeyl7DotF887KyUvZbiYsWhpa5bzSOe3KZzk0V615BP8R1dMAkAUjWQfLN7ka0vryHxdx4-cY2AxOwL_JfLAC7e-EaZRTJdNTTTDZnV6iP8O-D9-dqt-yClW4mswGXAQmBDgZpZ14mpp6Or2Q_aYcR8cn8lkoa8m9Ca07rV6QyPMIYj-NTmDwlDXJW8K2tW_5-1dw8434pdBrLwSsOsp7lByqWh5MKpoU-wzOs88X-st0Rpf0gn9kTw_fbEKmcHL0c5OwiAWhNoz__WfbkUqjeHNCjKTNL98Q36vY9GcC5GAqyksDZ6R8-Ck8ZXr_V_K7VcyH9o5lKIUEu8_80c72-sMojya1TVaSG9_C6grQO17jy9tKOxj9vXJt7PxzO_9WhVkH0tz30kqMEjo_q5djrLJfGiAvLuQIkFF5TyukCbjcRVZc6tSjsp0WNBIks4-uyrINOhlb7m2GzOMR_b77W5d2uIIH74rPOW3tv4FiqJ4x9xPhYP4zDoGOGUQTnzNKirf07M_t_2i19p--psfGjGGDTGJ-zW8nlIrkYXZIEa-6ENG5ZeoJGwbE7YL47bJ1kMvboUAAKKjNolKDHf4OZvyx_PGTTp2eodl7EEbfnMKWmZMu0iXRjhvurAXCq1W0bIYH4R7Lbd0i1e4d_MYYoHYqAceeP4iULLpfjGDpR0LSkDOpmSt8d9zExORZGzrlG35uNwgFY5Z81Rrb9_z8IxtNtSDIkGDg9ga8qYeTcunRwMNtd7ZpsVTC6K_ZNKMVIy0cncx5AtZyZNzb862gqtFdXA2-YyMRH6eSgyaqEF4MA28BtUco8Q7ZREwk=w1104-h769-no?authuser=0)

# Возможности

* Автоматическая простановка даты и времени посещений, учет повторных посещений, оставленных публикаций и видео, времени служения.
* Быстрый ввод «отказа» и «нет дома» двумя кликами.
* Поиск любого контакта и квартиры по имени, адресу, дате, времени, тексту посещения, заметке.
* Отображение всех интересующихся из всех участков в едином списке, в который также можно добавлять отдельные контакты.
* Сортировка всех контактов по имени, адресу, статусу, телефону, назначенной встрече или времени последнего посещения.
* Быстрая отправка отчета из приложения.
* Перенос лишних минут отчета на следующий месяц.
* Напоминание стать отчет. 
* Учет кредита часов для пионеров.
* Четыре типа участков: многоквартирный дом, частный сектор, деловая территория, телефонный список.
* Уведомление о просроченных участках (не сданных дольше 6 месяцев).
* Назначение встреч с контактами и индикация о встречах на сегодня на главной странице.
* Звонок или сообщение контакту прямо из приложения.
* Статистика обработки территории: количество участков, квартир, контактов с отказом и интересом, первых и повторных посещений. 
* Опционально: статусы обработки подъездов (были в будний день днем; в будний день вечером; в выходной).
* Опционально: функция «умная строка», позволяющая в одной-единственной строке ввести имя жильца и текст посещения, проставить статус квартиры, внести изменения в отчет либо сделать заметку к квартире. 
* Для пионеров: подсчет запаса или отставания от месячной нормы на текущий день; аналитика служебного года с часами за год, годовым запасом/отставанием, подсчетом оставшегося числа часов и среднего числа часов в месяц.
* Умный блокнот, в который можно отправлять заметки, связанные с квартирой/контактом и временем создания записи.
* Режим домофона: ставим галочки на квартиры, в которые позвонили.
* Вызов навигационной программы с прокладкой маршрута до участка из приложения.
* Сохранение в журнале каждого обновления отчета с меткой даты и времени.
* Все пользовательские данные хранятся в одном текстовом файле, который легко сохранять, пересылать, копировать.
* Автоматическое резервирование базы раз в 5 минут, ручное восстановление из любой резервной копии прямо в программе.
* Возможность установки пароля на вход в программу.
* Возможность мгновенного удаления всех данных.
* Синхронизация данных между устройствами через облачный сервис.
* Поддержка Android, Windows и Linux (скорее всего, также Mac).
* Оптимизированная версия для консольного режима, в котором программа способна работать на чем угодно, где есть Python со стандартными библиотеками.

# Установка и настройки

## Android

1. Скачайте и установите apk-файл: **[qpython_3s_v3.0.0+rocket_ministry_v1.0.0.apk](https://github.com/antorix/Rocket-Ministry/releases/download/v1.0.0-rc1/qpython_3s_v3.0.0+rocket_ministry_v1.0.0.apk)**.
2. Запустите установленное приложение QPython 3S.
3. Нажмите на большую круглую кнопку на главном экране.
4. Выберите проект: Rocket Ministry.

### Работа в QPython

Для общего понимания: Rocket Ministry НЕ является нативным приложением Android. Он является Python-скриптом, использующим библиотеку Scripting Layer for Android (SL4A), и для выполнения ему нужен интерпретатор. Таким интерпретатором и является приложение QPython. Сначала вы заходите в QPython, а затем запускаете собственно Rocket Ministry. Это можно сделать одним из двух способов:

* нажать на большую круглую кнопку на главной странице и оттуда выбрать соответствующий проект Rocket Ministry;
* перейти в раздел `Programs` → `Projects`, там выбрать проект и нажать `Run`.

***ВАЖНО:*** после установки программы зайдите в настройки QPython → `Default Program` → `Set from projects` и выберите Rocket Ministry как программу по умолчанию. Тогда она будет запускаться в один клик.

## Windows

1. Скачайте архив с Rocket Ministry: [https://github.com/antorix/Rocket-Ministry/archive/refs/heads/master.zip](https://github.com/antorix/Rocket-Ministry/archive/refs/heads/master.zip).
1. Скачайте и установите Python: [https://www.python.org/ftp/python/3.10.7/python-3.10.7-amd64.exe](https://www.python.org/ftp/python/3.10.7/python-3.10.7-amd64.exe).
4. Запустите файл Rocket Ministry.pyw.
5. С помощью прилагаемой иконки можно создать ярлык для рабочего стола.

## Linux

1. Скачайте архив с Rocket Ministry: [https://github.com/antorix/Rocket-Ministry/archive/refs/heads/master.zip](https://github.com/antorix/Rocket-Ministry/archive/refs/heads/master.zip).
2. Установите Python IDLE. В Ubuntu/Debian введите:

`sudo apt-get install idle3`
`idle3`

Для RHEL/Fedora:

`su yum install python-tools`

3. В IDLE откройте файл main.py и нажмите F5.

# Некоторые понятия программы

Многое в программе самоочевидно из интерфейса и (или) снабжено подсказками. Здесь я собрал некоторые моменты, которые очевидны чуть менее. Если вы хотите использовать потенциал программы по максимуму, настоятельно рекомендую ознакомиться с этим разделом.

## Участки и их типы

Участки состоят из подъездов; подъезды состоят из квартир; квартиры состоят из записей посещений. У каждого из этих четырех сущностей есть свое название и ряд параметров. Отдельно можно создавать этажи, но это лишь форма представления подъезда, а не объект. Участки делятся на 4 типа: 

🏢 **Многоквартирный дом**
 
🏫 **Деловая территория**

🏠 **Частный сектор**

☎ **Телефонный участок**

По принципу работы все типы одинаковы, отличаются только названия и иконки. Если у многоквартирного дома – подъезды, то у деловой территории это отделы, а у частного сектора – сегменты. То, что в многоквартирном доме называется «квартиры», в деловой территории – «сотрудники». Но функционально они одинаковы. Любой участок можно в любой момент преобразовать в другой тип и обратно. Правда, только в многоквартирном доме есть режим домофона и после создания подъезда автоматически предлагается создать поэтажный вид.

Квартира (сотрудник, номер телефона) функционально эквивалентна контакту, у них одинаковые настройки и поведение. Любую квартиру можно превратить в отдельный контакт, и создастся его копия. Подробнее о контактах – ниже.

**Нумерация квартир**. В номерах квартир допустимы только цифры. Создать квартиру с буквенными символами нельзя. Однако можно создавать квартиры с номерами начиная с 0, например 01 или даже 0005. Такие номера удобно использовать для несуществующих квартир или каких-нибудь неактуальных помещений, помечая их при этом заметками.

## Статусы

Каждая квартира, сотрудник, контакт и номер телефона (помним, что функционально это одно и то же) имеет статус в виде цветного кружочка. Всего таких статусов 7. Три играют функциональную роль: «отказ», «интерес» и «не были». Остальные служат только для визуализации, однако красный статус удобно использовать для агрессивных жильцов. Все статусы представляют собой кружочки, кроме интереса, который выполнен в виде смайлика:

🔵 – отказ

🙂 – интерес

🟢 – вспомогательный статус «зеленый»

🟣 – вспомогательный статус «фиолетовый»

🟤 – вспомогательный статус «коричневый»

🔴 – вспомогательный статус «красный»

⚫ – первичный статус квартиры, в которой никогда не были (нет ни одной записи посещений и имени жильца). Если его присвоить, программа удалит имя и все посещения

Кстати, в настройках есть «режим смайликов» – если его включить, смайликами станут все статусы, кроме первичного. Это ничего не меняет в работе программы, но просто забавно выглядит.

Статус «отказ» можно быстро присвоить любой квартире в два клика в меню первого посещения. Статусы с отказом не появляются в разделе *Контакты* – отказ исключает человека из этого раздела.

Контакты-интересующиеся показаны в общем списке участков – так можно быстро увидеть, где у вас есть интересующиеся:
 
**🏢 Ленина 50 (02.07) ✅15 🙂3**

В данном случае мы видим, что на участке Ленина 50 мы посетили 15 человек, из которых 3 проявили интерес.

Присвоение статуса осуществляется либо в деталях квартиры, либо при создании первого посещения, либо с помощью функции «умная строка» (она рассматривается ниже)

На самом деле в программе есть еще один, технический статус, который нельзя присвоить вручную:

❔ – неопределенный статус квартиры, которую посетили, но не поставили никакой статус. Она будет в таком виде, пока не получит полноценный статус. В таком же статусе будет квартира, если в меню первого посещения выбрать «НД» (нет дома). Задать такой статус вручную нельзя.

## Контакты

В разделе *Контакты* сведены все квартиры, сотрудники и телефонные номера со всех участков, кроме тех, кто в статусе «отказ». В этом разделе их можно сортировать, видеть, с кем назначена встреча, кто где живет и т. д. Прямо из раздела *Контакты* можно звонить, если указан телефон.

Однако вы можете создать новый контакт и вручную прямо в этом разделе. Таким образом, есть два типа контактов: привязанные к участкам и отдельные. У привязанных контактов рядом с иконкой статуса показана иконка их участка. У отдельных контактов вместо участка – звездочка:

⭐ 🙂 **Василий Петрович** – отдельный контакт

🏢 🙂 **Иван Сергеевич** – контакт, привязанный к участку (нельзя изменить адрес)

Между контактами этих двух видов только одно отличие: у привязанных контактов нельзя изменить адрес, только имя. Технически такой контакт – это, по сути, квартира на участке. Когда вы входите в такой контакт через раздел *Контакты*, вы напрямую входите в квартиру, минуя выбор участка и подъезда. Весь интерфейс будет тот же самый: записи посещений, детали и т. д. 

**Отдельные контакты**. Любой привязанный контакт можно скопировать в отдельный – создастся его полная копия со всеми параметрами и посещениями, только уже отдельная. Такой контакт существует как бы сам по себе, у него можно свободно изменять адрес (в его деталях есть отдельный пункт для этого). Также учтите, что при удалении участка вместе с ним удаляются и все живущие на нем контакты-квартиры. Однако программа при удалении участка автоматически создает их отдельные копии, так что с точки зрения пользователя все интересующиеся как бы продолжают «жить» и после сдачи участка, пока не будут удалены вручную.

Еще одно важное отличие между отдельными и привязанными контактами: первые отображаются вне зависимости от статуса. Если «отказники» на участках в разделе *Контакты* не показаны, отдельные контакты будут там даже с отказами.

# Синхронизация данных

Все пользовательские данные Rocket Ministry находятся в файле *data.jsn*. С помощью функций `Файл` → `Экспорт` / `Импорт` этот файл легко пересылать между разными устройствами, например между телефоном и компьютером, и работать на них с одними и теми же данными.

Самый быстрый способ организовать синхронизацию состоит в следующем. Для него на обоих устройствах должен быть установлен какой-то облачный сервис, например Google Диска.

**Телефон → компьютер.** Выполните на телефоне экспорт в Google Диск, желательно в то место, которое он предлагает по умолчанию, для скорости. На компьютере выполните импорт этого файла. Готово.

**Компьютер → телефон.** Чтобы обменяться данными в обратном направлении, на компьютере поместите папку с программой в ту папку, которая синхронизируется с Google Диском. Теперь база данных будет постоянно синхронизирована с облаком. На телефоне останется лишь скачать этот файл средствами Google Диск (он должен оказаться в папке «Загрузки» устройства) и импортировать его в интерфейсе приложения.

# Часто задаваемые вопросы

## Я запускаю программу, но вместо нее вижу много белого текста на черном фоне, последние слова: connection refused

Это глюк QPython на некоторых устройствах. Просто перезапустите программу (выгрузив из памяти через карусель открытых приложений и запустив снова). Или другой способ: настройки → `SL4A Service` → `Start SL4A Service`.

## Что делать в ситуации, если у меня разное количество квартир на разных этажах, и из-за этого не работает разбивка по этажам?

Эту ситуацию можно решить двумя способами. Первый: разделите подъезд на две части, назвав их, скажем, 1а и 1б. Делаем одну часть подъезда основной, с корректным количеством квартир и поэтажным видом (в настройках можно изменить номер первого этажа). Вторая часть подъезда будет представлять собой небольшой «хвостик» без поэтажного вида. Второй способ: используйте квартиры-заглушки с номерами, начинающимися на 0, например 01. В таких квартирах никто не живет, зато они заполняют места в раскладке, требуемые для сортировки. Им можно сразу присваивать отказы.

## Когда я переключаюсь с Rocket Ministry на другое приложение, а затем нажимаю на иконку QPython, чтобы вернуться, программа уже закрыта, что делать?

Это особенность работы QPython – при повторном нажатии на иконку активная консоль может закрыться (а может и нет). Но этого никогда не происходит, если вернуться в программу через список открытых приложений. Таким способом к ней можно возвращаться сколько угодно. Поэтому я рекомендую на уже открытую программу переходить через список приложений, а на иконку нажимать только для первичного запуска программы.

## Можно ли поднять быстродействие программы?

Попробуйте отключить в настройках своего устройства анимацию окон – это существенно повысит быстродействие программы, причем не только Rocket Ministry, но и других. Это очень полезно на любом Android-устройстве. На некоторых устройствах, например Huawei, это делается [очень просто](https://consumer.huawei.com/uz/support/content/ru-ru00863464/). Попробуйте выполнить поиск по настройкам «анимация». Если ничего не нашли, посмотрите советы [здесь](https://androidlime.ru/turn-off-animation-speed-up-old-smartphone).

## Я скачал apk-файл и установил QPython, но в нем нет программы.

Иногда она там появляется не сразу, подождите несколько секунд, можно выйти из QPython и зайти снова. Проверьте, что она находится на вкладке `Projects` → `Rocket Ministry`.

# Обратная связь

Вопросы, проблемы, пожелания? Пишите мне по электронной почте на [antorix@gmail.com](mailto:antorix@gmail.com) или в Telegram: [t.me/chivchalov](https://t.me/chivchalov).

# Лицензия

GNU/GPL. Вы можете свободно распространять и видоизменять программу.
